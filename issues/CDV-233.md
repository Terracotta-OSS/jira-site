---

title: "support mod_jk load balancing out of the box for DSO sessions under tomcat"
layout: issue
tags: 
permalink: /browse/CDV-233

issue_key: CDV-233
issue_numeric_sort_key: 233
issuetype: "New Feature"
project: "Community Development (Terracotta Server)"
project_key: "CDV"
status: "Closed"
resolution: "Fixed"
priority: "2 Major"
components: "Sessions"
labels: 
assignee: "hhuynh"
reporter: "teck"
votes:  0
watchers: 0

created: "2007-04-17T19:10:04.000-0400"
updated: "2007-07-09T14:36:13.000-0400"
resolved: "2007-06-27T17:17:00.000-0400"




---

{% raw %}

## Description

<div markdown="1" class="description">

This idea was born from this forum discussion:
http://forums.terracotta.org/forums/posts/list/202.page

mod\_jk is a plugin for apache httpd that lets one do load balancing to a set of backend tomcat instances.  The format of the session tracking cookie (JSESSIONID) generated by the DSO/Terracotta session manager is not a format that mod\_jk can understand (thus it cannot provide sticky sessions).  

There is an attribute "jvmRoute" in tomcat's configuration that supplies the label that mod\_jk understands. If that value is present in the local tomcat configuration we should probably use that instead of our own generated server identifier. We already do this in the case of weblogic for exactly the same reason. 

Some info about tomcat clustering and the "jvmRoute" parameter:
http://tomcat.apache.org/tomcat-5.5-doc/cluster-howto.html

</div>

## Comments


{:.comment-heading}
### **Hung Huynh** <span class="date">2007-07-09</span>

<div markdown="1" class="comment">

Test added SessionIDIntegrityTest

</div>



{% endraw %}
